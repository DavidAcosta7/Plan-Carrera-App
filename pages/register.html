<link rel="stylesheet" href="../css/styles.css">
<link rel="stylesheet" href="../css/register.css">
<body class="register-page">
    <div class="register-container">
        <div class="auth-card card animate-fade-in">
            <div class="card-header text-center mb-6">
                <h1 class="text-gradient text-3xl font-bold mb-2">Crear Cuenta</h1>
                <p class="text-gray-600">Ãšnete a miles de profesionales aprendiendo con IA</p>
            </div>

            <form class="register-form" id="registerForm">
                <div class="form-group">
                    <label for="name" class="form-label">Nombre Completo</label>
                    <input type="text" id="name" name="name" required placeholder="Juan PÃ©rez" class="input">
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">Correo ElectrÃ³nico</label>
                    <input type="email" id="email" name="email" required placeholder="juan@ejemplo.com" class="input">
                </div>

                <div class="form-group">
                    <label for="password" class="form-label">ContraseÃ±a</label>
                    <input type="password" id="password" name="password" required placeholder="MÃ­nimo 6 caracteres" class="input">
                    <div class="password-strength" id="passwordStrength" class="text-sm mt-2"></div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword" class="form-label">Confirmar ContraseÃ±a</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="Repite tu contraseÃ±a" class="input">
                </div>

                <div class="form-group">
                    <label class="flex items-start gap-2 text-gray-600 text-sm">
                        <input type="checkbox" id="terms" name="terms" required class="mt-1">
                        <span>Acepto los <a href="#" class="text-primary">tÃ©rminos y condiciones</a> y la <a href="#" class="text-primary">polÃ­tica de privacidad</a></span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
                    Crear Cuenta
                </button>

                <div class="form-footer mt-6 text-center">
                    <p class="text-gray-600">Â¿Ya tienes cuenta? <a href="#" class="text-primary" data-route="/login">Inicia sesiÃ³n</a></p>
                </div>
            </form>
        </div>

        <div class="auth-card card animate-fade-in" style="animation-delay: 0.2s;">
            <h2 class="text-white text-2xl font-semibold text-center mb-8">Â¿Por quÃ© registrarte?</h2>
            <div class="space-y-6">
                <div class="card hover-lift">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl w-16 h-16 bg-primary-100 rounded-2xl flex items-center justify-center">ðŸŽ¯</div>
                        <div>
                            <h3 class="text-gray-800 text-lg font-semibold mb-1">Plan Personalizado</h3>
                            <p class="text-gray-600 text-sm">IA crea un plan Ãºnico basado en tus objetivos</p>
                        </div>
                    </div>
                </div>
                <div class="card hover-lift">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl w-16 h-16 bg-secondary-100 rounded-2xl flex items-center justify-center">ðŸ¤–</div>
                        <div>
                            <h3 class="text-gray-800 text-lg font-semibold mb-1">Chat con Claude</h3>
                            <p class="text-gray-600 text-sm">Asistencia 24/7 para resolver dudas</p>
                        </div>
                    </div>
                </div>
                <div class="card hover-lift">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl w-16 h-16 bg-primary-100 rounded-2xl flex items-center justify-center">ðŸ“Š</div>
                        <div>
                            <h3 class="text-gray-800 text-lg font-semibold mb-1">Seguimiento de Progreso</h3>
                            <p class="text-gray-600 text-sm">Visualiza tu avance y logros</p>
                        </div>
                    </div>
                </div>
                <div class="card hover-lift">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl w-16 h-16 bg-secondary-100 rounded-2xl flex items-center justify-center">ðŸš€</div>
                        <div>
                            <h3 class="text-gray-800 text-lg font-semibold mb-1">Proyectos Reales</h3>
                            <p class="text-gray-600 text-sm">Construye tu portfolio profesional</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('registerForm');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const submitBtn = document.getElementById('submitBtn');
    const passwordStrength = document.getElementById('passwordStrength');

    // ValidaciÃ³n de contraseÃ±a
    passwordInput.addEventListener('input', function() {
        const password = this.value;
        let strength = 0;
        let message = '';

        if (password.length >= 6) strength++;
        if (password.length >= 10) strength++;
        if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
        if (/[0-9]/.test(password)) strength++;
        if (/[^a-zA-Z0-9]/.test(password)) strength++;

        switch(strength) {
            case 0:
            case 1:
                message = '<span class="weak">DÃ©bil</span>';
                break;
            case 2:
            case 3:
                message = '<span class="medium">Media</span>';
                break;
            case 4:
            case 5:
                message = '<span class="strong">Fuerte</span>';
                break;
        }

        passwordStrength.innerHTML = message;
    });

    // ValidaciÃ³n de confirmaciÃ³n
    confirmPasswordInput.addEventListener('input', function() {
        const password = passwordInput.value;
        const confirmPassword = this.value;
        
        if (confirmPassword && password !== confirmPassword) {
            this.setCustomValidity('Las contraseÃ±as no coinciden');
        } else {
            this.setCustomValidity('');
        }
    });

    // EnvÃ­o del formulario
    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(form);
        const userData = {
            name: formData.get('name'),
            email: formData.get('email'),
            password: formData.get('password')
        };

        // Validar que las contraseÃ±as coincidan
        if (userData.password !== formData.get('confirmPassword')) {
            showNotification('Las contraseÃ±as no coinciden', 'error');
            return;
        }

        // Deshabilitar botÃ³n
        submitBtn.disabled = true;
        submitBtn.textContent = 'Creando cuenta...';

        try {
            // Registrar usuario
            const user = auth.register(userData);
            
            showNotification('Â¡Cuenta creada exitosamente!', 'success');
            
            // Redirigir al onboarding
            setTimeout(() => {
                router.navigate('/onboarding');
            }, 1500);

        } catch (error) {
            console.error('Error en registro:', error);
            showNotification('Error al crear la cuenta. Intenta nuevamente.', 'error');
            
            // Rehabilitar botÃ³n
            submitBtn.disabled = false;
            submitBtn.textContent = 'Crear Cuenta';
        }
    });
});

function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.classList.add('show');
    }, 100);
    
    setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            document.body.removeChild(notification);
        }, 300);
    }, 3000);
}
</script>
